{
  "repo_notes": [
    {
      "content": "请务必使用简体中文 (Simplified Chinese) 生成所有文档的内容、摘要和解释。我的目标受众是中国开发者。请注意：在生成文档时，请动态分析当前代码库的结构，适时更新新增的内容或添加新的章节目录。请侧重于解释系统的设计理念、模块职责、数据流向以及扩展方式。如果代码库中新增了模块或数据源，文档应能自动涵盖它们，而无需修改此指令。"
    }
  ],
  "pages": [
    {
      "title": "项目概览",
      "purpose": "介绍主动消息插件的核心目标、主要功能特性以及其在 AstrBot 生态系统中的定位与架构。",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "安装与配置",
      "purpose": "引导用户完成插件安装、依赖项检查以及基础环境的准备工作。",
      "parent": "项目概览",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "快速开始",
      "purpose": "提供一步步的指引，帮助用户快速配置并启动私聊和群聊场景下的首次主动消息推送。",
      "parent": "项目概览",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "核心概念",
      "purpose": "阐述支撑主动消息系统的基础理论和设计思想。",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "主动消息模型",
      "purpose": "解释什么是主动消息，它与传统响应式聊天的区别，以及上下文感知和人设一致性的设计哲学。",
      "parent": "核心概念",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "双模式调度机制",
      "purpose": "详细对比私聊（基于持久化调度）与群聊（基于静默检测）在架构设计、触发逻辑及持久化策略上的差异。",
      "parent": "核心概念",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "会话状态与持久化",
      "purpose": "解释会话数据如何在内存中管理并持久化到磁盘，哪些数据是瞬态的，以及重启后的状态恢复机制。",
      "parent": "核心概念",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "配置层级与解析",
      "purpose": "说明全局默认配置与单会话独立配置之间的两级覆盖关系，以及最终配置的解析逻辑。",
      "parent": "核心概念",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "配置指南",
      "purpose": "全面解析插件提供的所有配置选项及其对行为的影响。",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "私聊配置详解",
      "purpose": "详细说明适用于私聊会话的配置项，包括调度间隔、自动触发、提示词模板及频率限制。",
      "parent": "配置指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "群聊配置详解",
      "purpose": "详细说明适用于群聊会话的配置项，包括静默检测阈值、空闲触发条件及群组特有设置。",
      "parent": "配置指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "单会话独立配置",
      "purpose": "解释如何为特定的会话（如专用插槽）配置个性化参数，以覆盖全局默认设置。",
      "parent": "配置指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "提示词与占位符",
      "purpose": "指导如何编写有效的主动消息提示词，如何使用时间、未回复计数等动态占位符，以及如何构建情感化回复。",
      "parent": "配置指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "调度与时间控制",
      "purpose": "解释所有与时间相关的配置，包括触发间隔、免打扰时段、空闲判定及最大未回复限制。",
      "parent": "配置指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "技术架构",
      "purpose": "深入剖析插件的内部实现细节、模块划分及关键设计决策。",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "生命周期与事件",
      "purpose": "解释插件的生命周期（初始化、事件监听、销毁）以及如何集成 AstrBot 的事件系统。",
      "parent": "技术架构",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "定时器管理",
      "purpose": "详细说明如何分别利用 APScheduler 处理持久化任务和 asyncio Timer 处理瞬态静默检测。",
      "parent": "技术架构",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "消息生成流水线",
      "purpose": "解释从触发条件满足到消息发送的完整流程：状态校验、上下文组装、LLM 交互、竞态处理及最终投递。",
      "parent": "技术架构",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "LLM 集成与容错",
      "purpose": "说明插件如何调用 AstrBot 的 LLM 接口，如何处理不同提供商的异常（如 Gemini 校验错误），以及上下文管理策略。",
      "parent": "技术架构",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "数据持久化架构",
      "purpose": "解释选择性持久化策略：哪些数据被保存到 JSON 文件，如何通过锁机制保证一致性，以及异常恢复流程。",
      "parent": "技术架构",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "高级功能",
      "purpose": "文档化插件的进阶特性及可选扩展功能。",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "自动触发系统",
      "purpose": "解释当插件加载且无用户活动时，如何通过自动触发机制发起初始的主动消息。",
      "parent": "高级功能",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "群组静默检测",
      "purpose": "详细说明专用于群聊场景的基于瞬态定时器的静默检测机制及其重置逻辑。",
      "parent": "高级功能",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "语音合成 (TTS) 集成",
      "purpose": "说明 TTS 功能的配置方式、音频生成流程以及“始终发送文本”选项的作用。",
      "parent": "高级功能",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "分段回复系统",
      "purpose": "详解长消息分段机制，包括分割模式（正则/单词）、间隔计算算法（随机/对数）及拟人化节奏控制。",
      "parent": "高级功能",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "免打扰机制",
      "purpose": "解释静默时段（Quiet Hours）的强制执行逻辑，以及它如何拦截计划中的消息推送。",
      "parent": "高级功能",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "贡献指南",
      "purpose": "为希望参与项目贡献的开发者提供行为准则、Issue 模板及 PR 流程说明。",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "如何贡献代码",
      "purpose": "说明贡献代码的具体工作流：Fork 仓库、创建分支、代码规范、提交约定及 PR 提交步骤。",
      "parent": "贡献指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "Bug 反馈",
      "purpose": "指导用户如何提交高质量的 Bug 报告，以及需要提供的关键调试信息。",
      "parent": "贡献指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    },
    {
      "title": "功能建议",
      "purpose": "说明如何提出新的功能请求或改进建议。",
      "parent": "贡献指南",
      "page_notes": [
        {
          "content": ""
        }
      ]
    }
  ]
}
